<!doctype html>
<html lang="en">
<!-- Fighting mongoose  file load  -->

	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
			  integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<meta charset="UTF-8">
		<link rel="stylesheet" type="text/css" href="../myStyles.css">
		<link rel="shortcut icon" type="image/ico" href="../Assets/Bits_and_Bytes_Logo.ico"/>
		<title>Form Upload</title>
		<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js' type='text/javascript'></script>
		<script type='text/javascript'>
			$.get('../Templates/Header.html',function(response){
				$('#header').html(response);
			});
			$.get('../Templates/Footer.html',function(response){
				$('#footer').html(response);
			});
		</script>
	</head>

	<script>
      function showImage() {
        var preview = document.querySelector('#dispimage');
        var file    = document.querySelector('#impfile').files[0];
        var reader  = new FileReader();

        reader.addEventListener("load", function () {
          preview.data = reader.result;

          // prints base64 to screen
          // this reader.result value can be uploaded to db
          console.log(reader.result)
        }, false);

        if (file) {
          reader.readAsDataURL(file);
        }
    }
	function upload_file() {

	}
	</script>

	<body>
		<div class="container-fluid">

			<div id="header"></div>

			<form method="POST" action="http://localhost:3000/api/storage/upload" enctype="multipart/form-data">
				<h1>Upload forms to Bits and Bytes</h1>
				<hr class="half_horizontal_rule">
				<h2>Choose a file to upload.</h2>
				<input type="file" name="file" size="75" id="impfile" onchange="showImage()" accept=".jpg, .pdf, .img">
				<input type="submit">
			  </form>
			<br>

			<!-- Preview Content -->
			<object id="dispimage" height='500px' width='500px'></object>



			<object data="https://storage.googleapis.com/fighting-mongooses-storage-dev/rtfm-red-team-field-manual.pdf" type="application/pdf">
			  <embed src="https://storage.googleapis.com/fighting-mongooses-storage-dev/rtfm-red-team-field-manual.pdf" type="application/pdf" />
			</object>

			<div id="footer"></div>
		</div>
	</body>
</html>
